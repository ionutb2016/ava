<!DOCTYPE html>
<html lang="en">
<head>    
<title>aplicatia de aur</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: http://code.jquery.com http://scripting.work http://www.avantajconsulting.ro https://cdnjs.cloudflare.com/; style-src 'self' 'unsafe-inline' http://code.jquery.com https://cdnjs.cloudflare.com/ ; script-src 'self' 'unsafe-inline' 'unsafe-eval' http://code.jquery.com http://scripting.work http://www.avantajconsulting.ro https://cdnjs.cloudflare.com/ ; img-src 'self' 'unsafe-inline' 'unsafe-eval'">


<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="css/bootstrap.min.css">

<!-- Latest compiled and minified JavaScript -->

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>  


<!-- Compiled and minified CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">

<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
<link rel="stylesheet" href="css/main.css">
</head>

<body>
<div id="wrap">
  <div class="slider fullscreen ">
    <ul class="slides">
      <li>
        <img src="images/4.jpg">
        <div class="caption center-align">         
          <h3 class="fancy-title">AVANTAJ CONSULTING</h3>
          <div class="fancy-slider-info center-align"> din 2004 </div>
          <h5 class="light grey-text text-lighten-3">Centrul de Excelenta in IT</h5>
        </div>
      </li>
      <li>
        <img src="images/5.jpg">
        <div class="caption center-align">          
          <h3 class="fancy-title">AVANTAJ CONSULTING</h3>
          <div class="fancy-slider-info center-align"> din 2004 </div>
          <h5 class="light grey-text text-lighten-3">Centrul de Excelenta in IT</h5>
        </div>
      </li>
      <li>
        <img src="images/6.jpg">
        <div class="caption center-align">          
          <h3 class="fancy-title">AVANTAJ CONSULTING</h3>
          <div class="fancy-slider-info center-align"> din 2004 </div>
          <h5 class="light grey-text text-lighten-3">Centrul de Excelenta in IT</h5>
        </div>
      </li>
    </ul>
  </div>

<div class="container">   
  <div class="row"> 
    <div id="cursuri" class="row"></div>
  </div>
</div><!-- end container -->

<footer class="footer">
      <div class="container">
        <div class="row nomargin">
        <div class="col-xs-4 text-center buttons">
          <a class="btn-floating btn-large  waves-effect waves-light red" data-toggle="modal" data-target="#loginModal"><i class="glyphicon glyphicon-log-in"></i>
          
          </a>     
        </div>
        <div class="col-xs-4 text-center buttons">
          <a class="btn-floating btn-large  waves-effect waves-light red"><i class="glyphicon glyphicon-tasks"></i>
          
          </a>
        </div>
        <div class="col-xs-4 text-center buttons">
          <div class="fixed-action-btn click-to-toggle">
          <a class="btn-floating btn-large  waves-effect waves-light red"><i class="glyphicon glyphicon-option-vertical"></i></a>
            <ul>
              <li><a class="btn-floating btn-large red waves-effect waves-light"><i class="glyphicon glyphicon-home"></i></a></li>
              <li><a class="btn-floating btn-large yellow waves-effect waves-light"><i class="glyphicon glyphicon-map-marker"></i></a></li>
              <li><a class="btn-floating btn-large green waves-effect waves-light"><i class="glyphicon glyphicon-heart-empty"></i></a></li>
              <li><a class="btn-floating btn-large blue waves-effect waves-light" id="exitApp"><i class="glyphicon glyphicon-off"></i></a></li>
            </ul>
          
          </div>
        </div>
      </div>
      </div>
    </footer>
</div>


<!-- Modal -->
        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
          <div class="container">
            <div class="row">
              <div id="loginbox" class="col-xs-12">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">×</button>
                        <br>
                        <h5 style="border-bottom: 1px solid#888; padding-bottom:10px;margin-bottom:25px; "> Sign In</h5>   
                        <form id="loginform" class="form-horizontal validateDontSubmit" role="form">
                                    
                            <div style="margin-bottom: 30px" class="input-field">
                                        <i class="material-icons prefix glyphicon glyphicon-user"></i>
                                        <input id="login-username" type="text" class="form-control input-field" name="username" value="" required>
                                        <label for="login-username">username or email</label>                                       
                                    </div>
                                
                            <div style="margin-bottom: 30px" class="input-field">
                                        <i class="material-icons prefix glyphicon glyphicon-lock"></i>
                                        <input id="login-password" type="password" class="form-control input-field" name="password" value="" required>
                                        <label for="login-password">password</label>
                                    </div>

                                <div style="margin-top:20px;margin-bottom:35px" class="form-group">

                                    <div class="col-sm-12 controls text-center">
                                      <input type="hidden" name="action" value="login">
                                      <button id="btn-login" class="btn btn-default waves-effect waves-light">Login  </button>

                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="col-md-12 control">
                                        <div style="border-top: 1px solid#888; padding-top:25px; font-size:85%" >
                                            Don't have an account! 
                                        <a href="#" onClick="$('#loginbox').hide(); $('#signupbox').show()">
                                            Sign Up Here
                                        </a>
                                        </div>
                                    </div>
                                </div>    
                            </form>     

              </div>
              <div id="signupbox" class="col-xs-12">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">×</button>
                            <br>
                          <h5 style="border-bottom: 1px solid#888; padding-bottom:10px;margin-bottom:25px; "> Sign Up</h5>
                            <form id="signupform" class="form-horizontal  validateDontSubmit" role="form">
                                 
                                <div class="form-group">
                                    
                                    <div class="col-md-12 input-field">
                                        <input id="register-email" type="text" class="form-control" name="email"  value="" required>
                                        <label for="email">Email</label>
                                    </div>
                                </div>
                                    
                                <div class="form-group">
                                    
                                    <div class="col-md-12 input-field">
                                        <input id="register-firstname" type="text" class="form-control" name="firstname"  value="" required>
                                        <label for="firstname" >First Name</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    
                                    <div class="col-md-12 input-field">
                                        <input id="register-lastname" type="text" class="form-control" name="lastname"  value="" required>
                                        <label for="lastname">Last Name</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    
                                    <div class="col-md-12 input-field">
                                        <input id="register-password" type="password" class="form-control" name="passwd" value="" required>
                                        <label for="password">Password</label>
                                    </div>
                                </div>
                                    
                                <div class="form-group">
                                    
                                    <div class="col-md-12 input-field">
                                        <input id="register-icode" type="text" class="form-control" name="icode" value="">
                                        <label for="icode">Invitation Code (optional)</label>
                                    </div>
                                </div>

                                <div class="form-group">
                                        
                                    <div class="col-md-12">
                                      <input type="hidden" name="action" value="register">
                                      <input type="hidden" name="regkey" value="">
                                        <button id="btn-signup" class="btn btn-default waves-effect waves-light col-xs-12 col-md-4"><i class="icon-hand-right"></i> &nbsp Sign Up</button>
                                        <span class="text-center col-xs-12 col-md-4">or</span>
                                        <button id="btn-fbsignup" type="button" class="btn btn-default col-xs-12 col-md-4"  onclick="$('#signupbox').hide(); $('#loginbox').show()">Back to login</button>  
                                    </div>
                                </div>
                               
                            </form>

              </div> 
            </div>
          </div>
        </div>


<script>

$(document).ready(function(){
      $('.slider').slider({indicators: false});
      $('.slider img').attr('src','images/spacer.png');
    });


$('#wrapper').hide();

function checkConnection() {
    var networkState = navigator.connection.type;
   if(navigator.connection.type == Connection.NONE) {        
    alert("No network connection");
}
}


document.addEventListener("deviceready",onDeviceReady,false);
function onDeviceReady(){
checkConnection() ;

//Materialize.toast("Device Ready");
var push = PushNotification.init({ "android": {"senderID": "440522947236"},
"ios": {"alert": "true", "badge": "true", "sound": "true"}, "windows": {} } );

push.on('registration', function(data) {
//console.log(data.registrationId);
//Materialize.toast(data.registrationId, 54000);
jQuery('input[name=regkey]').val(data.registrationId);
});

push.on('notification', function(data) {
//console.log(data.message);
alert(data.title+" Message: " +data.message);
// data.title,
// data.count,
// data.sound,
// data.image,
// data.additionalData
});

push.on('error', function(e) {
//Materialize.toast(e.message);
});


// alert("deviceready");
document.getElementById('exitApp').addEventListener('click', function() {
    navigator.app.exitApp();
});
}





function afiseaza_rezultatele(obiect) {
  $( ".close" ).trigger( "click" );
  $('.slider').slider('pause');
  $('.slider').hide();
  $('#loginbox').hide();
  $('#signupbox').hide();
  $('#cursuri').show();

  
  $.each(obiect,function(key,value){
    //console.log(key + "---" + value.clasa);
    if (key != 0) {
    var untext = "<div class='grupe col-xs-12 " + value.clasa + "'><div class='row'><div class='textG col-xs-4'>" + value.titlu + "</div><div class='grupetext col-xs-8'><div class='row'><div class=''><span>Data incepere:</span><span class='culoare_curs'>" + value.data_incepere +"</span></div><div class='infoG'>Program: " + value.program + " <br/>Pret: " + value.pret + " lei<br/>Sala de curs: " + value.sala + "</div></div></div></div><div class='row'><div class='locuri_tabel col-xs-8 pull-right'>Mai sunt: " + value.locuri + "</div></div></div>";

    $('#cursuri').append(untext);
    //console.log(untext);
    }
  });


  $('#cursuri').fadeIn('slow');
}



function ajaxcall(e, datele) {
    e.preventDefault();

            
            
            $.ajax({
              url: 'http://scripting.work/api/inscrieri_api.php',
              crossDomain: true,
              contentType: "application/json",
              dataType:'jsonp',
              type: 'GET',
              jsonp: 'callback',
              data: datele,
              success: function(data, textStatus, xhr) {
                  //alert(data);
                  
                  var stringy = JSON.stringify(data);
                  var obj = jQuery.parseJSON( stringy );
                  
                  
                  if (obj.mesaj == 'gogogo') {

                    afiseaza_rezultatele(obj);
                  }
                  else {
                    //console.log(obj);
                    //alert(obj.mesaj);
                    Materialize.toast(obj.mesaj, 4000) // 4000 is the duration of the toast
                  }        
                },
              complete: function(xhr, textStatus) {
                    //alert(xhr.status);
                }, 
              error: function(err) {
                alert(err.message);
              }
            }); // end ajax call
}




$(document).ready(function() {


      $('#cursuri').hide();
      $('#signupbox').hide();

      $(document).on('submit','.validateDontSubmit',function (e) {
          //prevent the form from doing a submit
          e.preventDefault();
          return false;
      });





      $('#btn-login').click(function(e){
        //Leverage the HTML5 validation w/ ajax. Have to submit to get em. Wont actually submit cuz form
        //has .validateDontSubmit class
        var $theForm = $(this).closest('form');
        //Some browsers don't implement checkValidity
        if (( typeof($theForm[0].checkValidity) == "function" ) && !$theForm[0].checkValidity()) {

           return;
        } else {
        //here comes ajax call and answer*/
              var actiunea = $theForm.find('input[name=action]').val();
              var userul = $('#login-username').val();
              var passul = $('#login-password').val();

              var data = {'actiunea': actiunea, 'username': userul, 'password': passul};
              ajaxcall(e, data);
          }

      });

      $('#btn-signup').click(function(e){
        //Leverage the HTML5 validation w/ ajax. Have to submit to get em. Wont actually submit cuz form
        //has .validateDontSubmit class
        var $theForm = $(this).closest('form');
        //Some browsers don't implement checkValidity
        if (( typeof($theForm[0].checkValidity) == "function" ) && !$theForm[0].checkValidity()) {

           return;
        } else {
        //here comes ajax call and answer*/
              var actiunea = $theForm.find('input[name=action]').val();
              var email = $('#register-email').val();
              var firstname = $('#register-firstname').val();
              var lastname = $('#register-lastname').val();
              var passwd = $('#register-password').val();
              var icode = $('#register-icode').val();
              var registrationid = $theForm.find('input[name=regkey]').val();

              var data = {'actiunea': actiunea, 'email': email, 'firstname': firstname, 'lastname': lastname, 'parola': passwd, 'codul': icode, 'regkey': registrationid};
              ajaxcall(e, data);
          }

      });




    

});




</script>
</body>
</html>